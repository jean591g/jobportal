<!DOCTYPE html>
<html lang="en" xmlns:mso="urn:schemas-microsoft-com:office:office"
      xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">
<head>
    <meta charset="UTF-8">
    <title>Jobs</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
          integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <!-- Bootstrap for JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
            crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!--[if gte mso 9]>
    <xml>
        <mso:CustomDocumentProperties>
            <mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_SharedWithUsers
                    msdt:dt="string">Dat20V1 3semester Members
            </mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_SharedWithUsers>
            <mso:SharedWithUsers msdt:dt="string">42;#Dat20V1 3semester Members</mso:SharedWithUsers>
        </mso:CustomDocumentProperties>
    </xml><![endif]-->
</head>
<body>
<div class="container">
    <div class="col-md-4" style="margin-top: 10px">
        <input type="text" id="myInput" onkeyup="myFunction4()" placeholder="Search for names.." class="search-input">
    </div>


    <div class="container" style="margin-top: 10px" id="main">
        <div class="row">

            <div class="col-md-12">
                <div id="form-container">
                    <table class="table table-striped table-hover table-lg">
                        <thead>
                        <tr style="color:black">
                            <th scope="col">Job title</th>
                            <th scope="col">Location</th>
                            <th scope="col">Job description</th>
                            <th scope="col">Employer</th>
                        </tr>
                        </thead>
                        <tbody style="text-align: left; color:black" id="tbl1">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <nav aria-label="...">
        <ul class="pagination">
            <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1">Previous</a>
            </li>
            <li class="page-item"><a class="page-link" href="#">1</a></li>
            <li class="page-item active">
                <a class="page-link" href="#">2 <span class="sr-only">(current)</span></a>
            </li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item">
                <a class="page-link" href="#">Next</a>
            </li>
        </ul>
    </nav>
</div>

</body>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


<!--<script>-->
<!--    function myFunction() {-->
<!--        let input, filter, table, tr, td, i, txtValue;-->
<!--        input = document.getElementById("myInput");-->
<!--        filter = input.value.toUpperCase();-->
<!--        table = document.getElementById("tbl1");-->
<!--        tr = table.getElementsByTagName("tr");-->
<!--        for (i = 0; i < tr.length; i++) {-->
<!--            for (let j=0; j<)-->
<!--            td = tr[i].getElementsByTagName("td")[0];-->
<!--            if (td) {-->
<!--                txtValue = td.textContent || td.innerText;-->
<!--                if (txtValue.toUpperCase().indexOf(filter) > -1) {-->
<!--                    tr[i].style.display = "";-->
<!--                } else {-->
<!--                    tr[i].style.display = "none";-->
<!--                }-->
<!--            }-->
<!--        }-->
<!--    }-->
<!--</script>-->
<script>
    function myFunction2() {
        let input, filter, table, tr, td, i, j, txtValue;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("tbl1");
        tr = table.getElementsByTagName("tr");

        for (i = 0; i < tr.length; i++) {
            tr[i].style.display = "none";
            var tds = tr[i].getElementsByTagName("td");

            for (j = 0; j < tr.length; j++) {
                td = tr[i].getElementsByTagName("td")[j];
                if (td) {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }
    }
</script>
<script>
        function myFunction4() {
        'use strict';

        var TableFilter = (function(myArray) {
        var search_input;

        function _onInputSearch(e) {
        search_input = e.target;
        // var tables = document.getElementsByClassName(search_input.getAttribute('data-table'));
            var tables = document.getElementById("tbl1")
        myArray.forEach.call(tables, function(table) {
        myArray.forEach.call(table.tBodies, function(tbody) {
        myArray.forEach.call(tbody.rows, function(row) {
        var text_content = row.textContent.toLowerCase();
        var search_val = search_input.value.toLowerCase();
        row.style.display = text_content.indexOf(search_val) > -1 ? '' : 'none';
    });
    });
    });
    }

        return {
        init: function() {
        var inputs = document.getElementById('myInput');
        myArray.forEach.call(inputs, function(input) {
        input.oninput = _onInputSearch;
    });
    }
    };
    })(Array.prototype);

        document.addEventListener('readystatechange', function() {
        if (document.readyState === 'complete') {
        TableFilter.init();
    }
    });

    }
</script>

<script>
    let tableRows = "";

    $(function () {
        $.ajax({
            url: "http://3.236.216.244:9090/jobs",
            success: function (result) {
                console.log(result)

                $.each(result, function (key, value) {


                    tableRows += "<tr>";
                    tableRows +=
                        "<td>" + value["jobtitle"] +
                        "</td><td>" + value["location"] +
                        "</td><td>" + value["jobtype"] +
                        "</td><td>" + value["company"] +
                        "</td>";
                });
                tableRows += "</tr>";
                $("#tbl1").html(tableRows)
                // $("#searchResult").html(joblist)
            }
        })
    })


</script>


</html>