<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/style.css">
    <title>index</title>
</head>
<body>
<div class="topnav">
    <input id="searchField" type="text" placeholder="Search..">
    <button onclick="searchWithField()">Search</button>
    <ul id="searchResult"></ul>
</div>

</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
    let jobs = []

    $.ajax({
        url: "http://3.236.216.244:9090/jobs",


        success: function (result) {
            $.each(result, function (key, value) {

                jobs.push(value['jobscol'])
            });
            $('#searchResult').html(makeUL(jobs))
        }
    })


    // let newjobs = jobs;
    function makeUL(array) {

        const list = document.createElement('ul');
        for (let i = 0; i < array.length; i++) {

            const item = document.createElement('li');

            item.appendChild(document.createTextNode(array[i]));
            list.appendChild(item);

        }
        return list;

    }
    document.getElementById('searchResult').appendChild(makeUL(jobs));

    function searchWithField() {
        let ul = document.getElementById('searchResult')
        let field = document.getElementById('searchField')
        let searchString = field.value
        let jobs = search(searchString)

        ul.innerHTML = "";
        jobs.forEach(job => {
            let li = document.createElement('li')
            li.innerText = `${job}`
            ul.appendChild(li)
        })
    }

    function search(searchString){
        if (typeof searchString !== 'string' || searchString.length === 0){
            return jobs;
        }

        let searchLower = searchString.toLowerCase()
        return jobs.filter(job => {
            if (job.toLowerCase().includes(searchLower)) {
                return true
            }
        })
    }


</script>
<!-- til at gå til det pågældende job  -->
<a href="http://localhost:8080/jobinfo"><button class="page-item">JOB-Info</button></a>

<nav aria-label="...">
   <ul class="pagination">
       <li class="page-item disabled">
           <a class="page-link" href="#" tabindex="-1">Previous</a>
       </li>
       <li class="page-item"><a class="page-link" href="#">1</a></li>
       <li class="page-item active">
           <a class="page-link" href="#">2 <span class="sr-only">(current)</span></a>
       </li>
       <li class="page-item"><a class="page-link" href="#">3</a></li>
       <li class="page-item">
           <a class="page-link" href="#">Next</a>
       </li>
   </ul>
</nav>
</html>